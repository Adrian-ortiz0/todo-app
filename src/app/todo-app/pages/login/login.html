<div class="min-h-screen flex items-center justify-center bg-base-200 p-4">
  <div class="card w-full max-w-sm shadow-2xl bg-base-100">
    <div class="card-body">
      <h2 class="card-title text-2xl font-bold justify-center mb-4">Acceso</h2>

      @if (errorMessage()) {
      <div class="alert alert-error text-sm py-2 mb-4">
        <span>{{ errorMessage() }}</span>
      </div>
      }

      <form
        [formGroup]="loginForm"
        (ngSubmit)="handleSubmit()"
        class="space-y-4"
      >
        <div class="form-control">
          <label class="label">
            <span class="label-text font-semibold">Email</span>
          </label>
          <input
            type="email"
            formControlName="email"
            placeholder="correo@ejemplo.com"
            class="input input-bordered"
            [class.input-error]="loginForm.get('email')?.invalid && loginForm.get('email')?.touched"
          />
          @if (loginForm.get('username')?.invalid &&
          loginForm.get('username')?.touched) {
          <label class="label py-1">
            <span class="label-text-alt text-error"
              >El usuario es requerido (mín. 3 caracteres)</span
            >
          </label>
          }
        </div>

        <div class="form-control">
          <label class="label">
            <span class="label-text font-semibold">Contraseña</span>
          </label>
          <input
            type="password"
            formControlName="password"
            placeholder="••••••••"
            class="input input-bordered"
            [class.input-error]="loginForm.get('password')?.invalid && loginForm.get('password')?.touched"
          />
          @if (loginForm.get('password')?.invalid &&
          loginForm.get('password')?.touched) {
          <label class="label py-1">
            <span class="label-text-alt text-error"
              >Contraseña inválida (mín. 6 caracteres)</span
            >
          </label>
          }
        </div>

        <div class="form-control mt-6">
          <button
            type="submit"
            class="btn btn-primary"
            [disabled]="isLoading() || loginForm.invalid"
          >
            @if (isLoading()) {
            <span class="loading loading-spinner"></span>
            } Ingresar
          </button>
        </div>
      </form>

      <p class="text-center mt-4 text-sm">
        ¿No tienes cuenta?
        <a
          [routerLink]="'/register'"
          class="text-primary cursor-pointer font-semibold hover:underline"
        >
          Regístrate
        </a>
      </p>
    </div>
  </div>
</div>
